@(tareas: List[Tarea], usuario: Usuario, mensaje: String, error: String)
@scripts = {
<script type="text/javascript">
        function del(urlBorrar) {
          //Se añade confirmación de borrado
          if(confirm("¿Está seguro de querer borrar la tarea?")){
            $.ajax({

                url: urlBorrar,
                type: 'DELETE',
                success: function(results) {
                    alert(results);
                    //refresh the page
                    location.reload();
                },
                error: function(results) {
                    alert(results.responseText);
                    location.reload();
                }
            });
            return true;
          }
          else return false;
        }
    </script>
}
@main("Tareas del usuario "+usuario.id, scripts) {

    <h1> Listado de tareas de @usuario.login</h1>
    <a class="btn btn-primary" href="@routes.TareasController.formularioNuevaTarea(usuario.id)">Nueva Tarea</a></p>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Listado</h3>
        </div>
        <div class="panel-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>DESCRIPCIÓN</th>
                        <th>ACCIÓN</th>
                    </tr>
                </thead>
                <tbody>
                    @for(tarea <- tareas) {
                        <tr>
                            <td>@tarea.id</td>
                            <td>@tarea.descripcion</td>
                            <td>
                                <a style="cursor: pointer" href="#"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a>
                                <a style="cursor: pointer" href="@routes.TareasController.formularioEditaTarea(tarea.id, usuario.id)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                                <a style="cursor: pointer" onclick="return del('@routes.TareasController.borraTarea(tarea.id, usuario.id)')"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    @if(mensaje != null) {
        <div class="alert alert-success">
            @mensaje
        </div>
    }

    @if(error != null) {
        <div class="alert alert-danger">
            @error
        </div>
    }
}